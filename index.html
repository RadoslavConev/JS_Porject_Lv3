<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Caesar Cipher Decoder 0.1.2</title>
	<!-- <script src="caesar_logic.js" type="application/javascript"></script> -->
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div id='input_form'>
		<form>
			<div>
				<input type="text" name="txtinput" id=txtinput></input>
			</div>
			<div>
				<button type="submit" id=txtinput_btn>Decode</button>
			</div>
		</form>
	</div>
	




<script type="text/javascript">
var alphabet = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z']; //26
var input_split = [];
var input;
var mostFrequent = null;
var counts = { };
var indexOfMostCommon;
var displcE;
var newText = '';

function decoding (e){
	document.getElementById("txtinput_btn").addEventListener("click", function(event){
    	event.preventDefault() 
});
	input = document.getElementById('txtinput').value;
	console.log(input)
	input = input.toLowerCase();
	console.log(input)
	input_split = input.split('');
		console.log(input_split)
	var previous = 1;


			//most common letter
 	for(var i = 0; i < input_split.length; i++){
		var letter = input_split[i];
			
		if(counts[letter] === undefined){
           	counts[letter] = 1;
       	}else{
           	counts[letter] = counts[letter] + 1;
       	}

       	if(counts[letter] > previous){
            previous = counts[letter];
            mostFrequent = input_split[i];
       	}
    }
//return mostFrequent;
//}

//function show () {
	//indexOfMostCommon = document.getElementById('show').innerHTML = alphabet.indexOf(mostCommon());
			//replacement
	indexOfMostCommon = alphabet.indexOf(mostFrequent);
	console.log(indexOfMostCommon)
	if ((4 - indexOfMostCommon) > 0) {
		displcE = (4 - indexOfMostCommon);
		console.log(displcE)
		for (var k = 0; k < input.length; k++) {
			var currLetter = input_split[k];
			if (currLetter === '') {
				newText += currLetter;
				continue;
			}
			var currLetIndex = alphabet.indexOf(currLetter);
			newText += alphabet[currLetIndex + displcE];
			console.log(newText);
		}
	}

return newText;
//document.getElementById('show').innerHTML = decoding();
//return newText;
}

function decodinger (e) {
	document.getElementById("txtinput_btn").addEventListener("click", function(event){
    	event.preventDefault() 
});
	input = document.getElementById('txtinput').value;
	console.log(input)
	input = input.toLowerCase();
	console.log(input)
	input_split = input.split('');
	console.log(input_split)
	var previous = 1;

for (var j = 0; j < 26; j++) {
	console.log(j);
	var currLetter = input_split[j];
	console.log(currLetter);
	var currLetIndex = alphabet.indexOf(currLetter);
	newText += alphabet[currLetIndex + j];
	console.log(j + newText);

}


			//most common letter
 	// for(var i = 0; i < input_split.length; i++){
		// var letter = input_split[i];
			
		// if(counts[letter] === undefined){
  //          	counts[letter] = 1;
  //      	}else{
  //          	counts[letter] = counts[letter] + 1;
  //      	}

  //      	if(counts[letter] > previous){
  //           previous = counts[letter];
  //           mostFrequent = input_split[i];
  //      	}
  //   }



return newText;
}

function show (){
	document.getElementById('show').innerHTML = decodinger();
}




</script>
	
<button type="submit" onclick="show()" id=test_btn>Show</button>
<div id=show >nothing</div>
<div>Result:</div>
<div id="result"></div>

</body>
</html>